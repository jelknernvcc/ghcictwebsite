; FEET TO INCHES CONVERTER	16 NOV 24
CR	EQU	0DH
LF	EQU	0AH
CTRLZ	EQU	1AH

; CP/M BDOS FUNCTIONS
RCONF	EQU	1
WCONF	EQU	2
RBUFF	EQU	10

; CP/M ADDRESSES
BDOS	EQU	5
TPA	EQU	100H

	ORG	TPA

START:	LXI	SP,STAK
	CALL	CCRLF
	LXI	H,SINON
	CALL	COMSG
	CALL	CCRLF
MAIN:	LXI	H,PROMPT
	CALL	COMSG
	CALL	CI
	STA	VAL
	CALL	CCRLF
	LXI	H,RESULT
	CALL	COMSG
	LXI	H,INBUF+2
	CALL	CO
	CALL	PARSE
	CALL	COMSG
	CALL	CCRLF	
	JMP	MAIN

PARSE:	LDA	VAL
	LXI	H,ZERO
	CPI	48
	RZ
	LXI	H,ONE
	CPI	49
	RZ
	LXI	H,TWO
	CPI	50
	RZ
	LXI	H,THREE
	CPI	51
	RZ
	LXI	H,FOUR
	CPI	52
	RZ
	LXI	H,FIVE
	CPI	53
	RZ
	LXI	H,SIX
	CPI	54
	RZ
	LXI	H,SEVEN
	CPI	55
	RZ
	LXI	H,EIGHT
	CPI	56
	RZ
	LXI	H,NINE
	CPI	57
	RZ
	LXI	H,ERROR
	CALL	COMSG
	JMP	0

; CONSOLE CHARACTER INTO REGISTER A MASKED TO 7 BITS
CI:	PUSH	B
	PUSH	D
	PUSH	H
	MVI	C,RCONF
	CALL	BDOS
	ANI	7FH
	POP	H
	POP	D
	POP	B
	RET

; CHARACTER IN REGISTER A OUTPUT TO CONSOLE
CO:	PUSH	B
	PUSH	D
	PUSH	H
	MVI	C,WCONF
	MOV	E,A
	CALL	BDOS
	POP	H
	POP	D
	POP	B
	RET

; CARRIAGE RETURN, LINE FEED TO CONSOLE
CCRLF:	MVI	A,CR
	CALL	CO
	MVI	A,LF
	JMP	CO

; MESSAGE POINTED TO BY HL OUT OF CONSOLE
COMSG:	MOV	A,M
	ORA	A
	RZ
	CALL	CO
	INX	H
	JMP	COMSG

; INPUT CONSOLE MESSAGE INTO BUFFER
CIMSG:	PUSH	B
	PUSH	D
	PUSH	H
	LXI	H,INBUF+1
	MVI	M,0
	DCX	H
	MVI	M,80
	XCHG
	MVI	C,RBUFF
	CALL	BDOS
	LXI	H,INBUF+1
	MOV	E,M
	MVI	D,0
	DAD	D
	INX	H
	MVI	M,0
	POP	H
	POP	D
	POP	B
	RET

SINON:  DB      'NUMBER CONVERTER',CR,LF,0
PROMPT: DB      'ENTER A NUMBER: ',0
RESULT:	DB	'NUMBER: ',0
ERROR:	DB	'PLEASE ENTER A NUMBER',0	

ZERO:	DB	'ZERO',0	
ONE:	DB	'ONE',0
TWO:	DB	'TWO',0
THREE:	DB	'THREE',0
FOUR:	DB	'FOUR',0
FIVE:	DB	'FIVE',0
SIX:	DB	'SIX',0
SEVEN:	DB	'SEVEN',0
EIGHT:	DB	'EIGHT',0
NINE:	DB	'NINE',0

VAL:	DS	1
INBUF:	DS	83
STAK:	DS	64

	END