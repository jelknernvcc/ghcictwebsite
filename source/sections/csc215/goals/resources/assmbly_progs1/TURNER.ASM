; IOHEADER.LIB

START:
MVI B, 0

INPUT1:
CALL SPMSG
DB LF, 'ENTER YOUR FIRST NUMBER', CR, LF, 0
CALL CIMSG
CALL CCRLF
CALL READNUM
XCHG
SHLD NUM1

MOV A, L
ADI 30H
CALL CO

INPUT2:
CALL SPMSG
DB LF, 'ENTER YOUR SECOND NUMBER', CR, LF, 0
CALL CIMSG
CALL CCRLF
CALL READNUM

MOV A, E
ADI 30H
CALL CO

ADDNUMS:
CALL TWOCR
LHLD NUM1
DAD D
MOV B, H
MOV C, L
CALL BINTOASCII
LXI H, BTABUF
CALL COMSG

NUM1: DW 0
BTACOUNTER: DB 0
BTABUF: DS 6

READNUM:
MVI D, 0
MVI E, 0
LXI H, INBUF+2

READNUMLOOP:
MOV A, M
ORA A
RZ

MOV A, E
MVI B, 10
CALL MULTIPLY
MOV E, A

MOV A, M
ANI 0FH
XCHG
MOV C, A
MVI B, 0
DAD B
XCHG

INX H
JMP READNUMLOOP

BINTOASCII:
MVI D, 27H
MVI E, 10H
CALL BTA
STA BTABUF
MVI D, 03H
MVI E, E8H
CALL BTA
STA BTABUF+1
MVI D, 0
MVI E, 64H
CALL BTA
STA BTABUF+2
MVI E, 0AH
CALL BTA
STA BTABUF+3
MVI E, 01H
CALL BTA
STA BTABUF+4
RET

BTA:
MVI A, 0
STA BTACOUNTER
BTALOOP:
MOV A, B
CMP D
JP BTALOOPEND
MOV A, C
CMP E
JP BTALOOPEND
LDA BTACOUNTER
ADI 30H
RET
BTALOOPEND:
MOV A, C
SBB E
MOV C, A
MOV A, B
SBB D
MOV B, A
LDA BTACOUNTER
INR A
STA BTACOUNTER
JMP BTALOOP

; MATH.LIB

; IO.LIB
